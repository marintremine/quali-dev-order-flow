/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.6.4/samples
 */


allprojects {
    apply {
        plugin("project-report")
    }
    // Workaround for dependency issues on pulsar quarkus reactive (see https://github.com/quarkusio/quarkus/issues/40390)
    configurations.all {
        resolutionStrategy.dependencySubstitution {
            substitute(module("org.apache.bookkeeper:circe-checksum"))
                    .using(module("org.apache.bookkeeper:circe-checksum:4.17.1"))
                    .withoutClassifier()
            substitute(module("org.apache.bookkeeper:cpu-affinity"))
                    .using(module("org.apache.bookkeeper:cpu-affinity:4.17.0"))
                    .withoutClassifier()
        }
    }
}

tasks.register("projectReportAll") {
    // All project reports of subprojects
    allprojects.forEach {
        dependsOn(it.tasks.getAt("projectReport"))
    }

    // All projectReportAll of included builds
    gradle.includedBuilds.forEach {
        dependsOn(it.task(":projectReportAll"))
    }
}